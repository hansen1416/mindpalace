!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r,i;r=[n(1)],i=function(t){t=null,window.YangSpaceEvent.setOperation([{selector:".ctg_btn",radius:100},{selector:".item_btn",radius:100}]);let e=new YangSpaceEvent({stage:document.getElementById("stage"),rotateObj:document.getElementById("galaxy"),radius:140,gap:120});e.spheres(),e.trackball({impulse:!0,resetMotion:!0,omegaGap:.8,lambda:.001}),e.zoom(),e.click(),e=null}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3),n(15),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(2),n(16),n(17),n(18),n(19),n(22),n(23),n(24),n(21),n(20),n(27),n(28)],i=function(t,e,n,r,i,a,o,s,u,l,c,f,d,p,h,v,m,g,x,w,y,b,M,q,S){"use strict";S=null;let A=new WeakMap,_=new WeakMap;const k=t.getElementById("ctg_detail_url").value,F=t.getElementById("item_detail_url").value;class O extends YangSpaceLayout{constructor(t){super(t);this.rotateObj=t.rotateObj;this.startMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}set setStartMatrix(t){this.startMatrix=t}get getStartMatrix(){return this.startMatrix}trackball(e){let n=this,g=true,y=0,b=0,M=[],q=[],S=[1,1,1],A=0,_=0,k=0,F=0,O=0,N=true,P=.5,L=.01,T=null,j=null,E=false,R;g=e.impulse;N=e.resetMotion;P=e.omegaGap;L=e.lambda;b=s(this.stage);y=this.stage.offsetWidth<this.stage.offsetHeight?this.stage.offsetHeight/2:this.stage.offsetWidth/2;R=a(this.rotateObj,r+"transform");if(R!="none"){this.setStartMatrix=h(R)}v(this.stage,"mousedown",z);function z(e){if(n.rotateObj.classList.contains("rotate_animation")){let s=n.rotateObj,u=a(s,r+"transform");s.classList.remove("rotate_animation");n.setStartMatrix=h(u);s.style[i]=u}if(N&&O!==0){H()}M=c(o(e),b,y);A=_;k=(new Date).getTime();m(n.stage,"mousedown",z);v(t,"mousemove",I);v(t,"mouseup",D)}function I(t){t.preventDefault();q=c(o(t),b,y);if(q[0]==M[0]&&q[1]==M[1]&&q[2]==M[2]){return false}A=_;S=f(d(M,q));_=l(M,q);E=false;Y()}function D(e){e.preventDefault();m(t,"mousemove",I);m(t,"mouseup",D);v(n.stage,"mousedown",z);if(S==[]||isNaN(S[0])||isNaN(S[1])||isNaN(S[2])){return false}F=(new Date).getTime();B();if(g&&O>0){E=true;x(C)}else{H()}}function Y(){n.rotateObj.style[i]="rotate3d("+S+", "+_+"rad) matrix3d("+n.getStartMatrix+")";T=x(Y);if(E){w(T)}}function B(){let t=_-A,e=F-k;O=Math.abs(t*(1e3/60)/e);if(isNaN(O)){O=0}else if(P>0&&O>P){O=P}}function C(){_+=O;O=O>0?O-L*Math.sqrt(O):0;n.rotateObj.style[i]="rotate3d("+S+","+_+"rad) matrix3d("+n.getStartMatrix+")";if(O===0){w(j);H()}else{j=x(C)}}function H(){E=true;n.setStartMatrix=u(n.getStartMatrix,p(S,_));A=_=O=0}}zoom(){v(this.stage,"wheel",o);let e=this,n=t.getElementById("style_zoom"),r=n["sheet"]||n["styleSheet"];function o(t){t.preventDefault();let n=t.deltaY/Math.abs(t.deltaY),o=r.cssRules.length,s=n>0?o:o-1;if(s>=e.tiers&&n>0||s<0&&n<0){return false}if(n>0){r.insertRule(".tier-"+s+"{display:none;}",s)}else{r.deleteRule(s)}let u="";do{u+=":not(.tier-"+s+")";s--}while(s>-1);let l=e.stage.querySelectorAll(".star"+u),c=e.gap*n+"px",f=0;do{l[f].style[i]=a(l[f],"transform")+"translateZ("+c+")";f++}while(f<l.length)}}click(){v(t,"click",r);let n=this;A.set(this,new Quill("#editor"));function r(t){let e=t.target;if(e.nodeName==="A"){return false}t.preventDefault();if(e.classList.contains("star")){a(e)}else if(e.classList.contains("btn")){s(e)}else if(e.classList.contains("submit")){o(e)}}function a(e){let r=e.dataset,i=r["ctg_id"]?r["ctg_id"]:0,a=r["item_id"]?r["item_id"]:0,o=t.getElementById("ctg_box"),s=t.getElementById("item_box");if(i){b(o);M(s)}else if(a){b(s);M(o)}_.set(n,e)}function o(t){let e=t.parentNode,r=new FormData(e),i;if(e.id=="item_form"){r.append("content",A.get(n).getHTML())}i=function(t){console.log(t)};g(e.action,i,r)}function s(r){let a=_.get(n),o=a?a.dataset:undefined,s=r.dataset,u=s["form"]?t.getElementById(s["form"]):null,l=[],c=0;if(u&&s["action"]){u.action=s["action"];l=u.querySelectorAll("input[type='hidden']")}while(c<l.length){l[c].value=o[l[c].getAttribute("name")]||s[l[c].getAttribute("name")];c++}switch(s.func){case"focus":let f=y(a.style[i]);n.setStartMatrix=h(f);n.rotateObj.style[i]=f;break;case"hide":M(r.parentNode);break;case"descendant":let d=o["ctg_id"];if(n.rotateObj.querySelector(".ctg[data-pid='"+d+"']")){e.href=e.origin+e.pathname+"?pid="+d}else{console.warn("no descendant found")}break;case"add_desc":n.clearForm(u);b(u);break;case"add_peer":n.clearForm(u);b(u);break;case"edit_ctg":g(k,function(t){if(t.status){u.querySelector("#ctg_title").value=t.message["title"];u.querySelector("#ctg_sort").value=t.message["sort"];b(u)}},new FormData(u));break;case"add_item":n.clearForm(u);b(u);break;case"edit_item":g(F,function(t){A.get(n).setHTML(t.message);b(u)},new FormData(u));break;case"reset_trackball":n.setStartMatrix=q(n.rotateObj);break}}}clearForm(t){t.reset();if(t.querySelector("#editor")){A.get(this).setHTML("")}}}window.YangSpaceEvent=O}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){return function(t,e){var n=t[0],r=t[1],i=t[2],a=e,o=Math.sin(a)/2,s=Math.sin(a/2)*Math.sin(a/2),u=new Float32Array(16);return u[0]=1-2*(r*r+i*i)*s,u[1]=2*(n*r*s+i*o),u[2]=2*(n*i*s-r*o),u[4]=2*(n*r*s-i*o),u[5]=1-2*(n*n+i*i)*s,u[6]=2*(r*i*s+n*o),u[8]=2*(n*i*s+r*o),u[9]=2*(r*i*s-n*o),u[10]=1-2*(n*n+r*r)*s,u[15]=1,u}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return window.document}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){var t=navigator.userAgent.toLowerCase(),e="";return/webkit/gi.test(t)?e="Webkit":/msie | trident/gi.test(t)?e="ms":/mozilla/gi.test(t)?e="Moz":/opera/gi.test(t)&&(e="O"),e}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){var t=navigator.userAgent.toLowerCase(),e="";return/webkit/gi.test(t)?e="-webkit-":/msie | trident/gi.test(t)?e="-ms-":/mozilla/gi.test(t)||/opera/gi.test(t)&&(e="-o-"),e}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(4)],i=function(t){return t+"Transform"in document.documentElement.style?t+"Transform":"transform"}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){return function(t,e){return document.defaultView.getComputedStyle(t,"").getPropertyValue(e)}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t){var e,n;if(t.type.indexOf("mouse")>-1||t.type.indexOf("click")>-1)e=t.pageX,n=t.pageY;else if(t.type.indexOf("touch")>-1&&1===t.touches.length){var r=t.touches[0];e=r.pageX,n=r.pageY}return[e,n]}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t){var e=0,n=0;if(t.offsetParent){do e+=t.offsetLeft,n+=t.offsetTop;while(t=t.offsetParent);return[e,n]}}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t,e){var n=new Float32Array(16);return n[0]=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],n[1]=t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],n[2]=t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],n[3]=t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],n[4]=t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],n[5]=t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],n[6]=t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],n[7]=t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],n[8]=t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],n[9]=t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],n[10]=t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],n[11]=t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],n[12]=t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],n[13]=t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],n[14]=t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],n[15]=t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15],n}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t,e){var n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])*Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return Math.acos(n/r)}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t,e,n){var r=1-(t[0]-e[0])/n,i=1-(t[1]-e[1])/n,a=1-r*r-i*i;return[r,i,a]}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t){for(var e=t.length,n=0,r=[],i=0;e>i;i++)n+=Math.pow(t[i],2);if(n=Math.sqrt(n),0==n)return!1;for(var i=0;e>i;i++)r[i]=t[i]/n;return r}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t,e){var n=[];return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=t[2]*e[0]-t[0]*e[2],n[2]=t[0]*e[1]-t[1]*e[0],n}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return window.location}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t){var e=t.split(",");return e.length<16?new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):(e[0]=e[0].replace(/(matrix3d\()/g,""),e[15]=e[15].replace(/\)/g,""),Float32Array.from(e))}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t,e,n,r){var i=arguments[3]||!1;t.addEventListener(e,n,i)}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t,e,n,r){var i=arguments[3]||!1;t.removeEventListener(e,n,i)}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(3),n(20),n(21)],i=function(t,e,n){return function(r,i,a,o,s,u){let l=t.getElementById("progress");o=o||"POST",s=s||!0,(u=u||function(){l&&n(l)})();let c=new XMLHttpRequest;c.onreadystatechange=function(){function t(t){t.status?(i(t),l&&(l.classList.remove("taiji"),l.classList.add("correct"),setTimeout(function(){e(l),l.classList.remove("correct"),l.classList.add("taiji")},2e3))):console.log("fan hui zhi cuo wu")}if(c.readyState===XMLHttpRequest.DONE){if(200!==c.status)throw"error occured during request";t(JSON.parse(c.responseText))}},c.open(o,r,s),c.setRequestHeader("X-CSRF-TOKEN",t.querySelector('meta[name="csrf_token"]').getAttribute("content")),c.send(a)}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){return function(t){t.style.display="none"}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t){t.style.display="block"}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[n(16),n(25),n(26)],i=function(t,e,n){return function(r){var i=t(r);return i[12]=0,i[13]=0,i[14]=0,e(n(i))}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){return function(t){return"matrix3d("+t.join(",")+")"}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r,i;r=[],i=function(){return function(t,e){e=e||new Float32Array(16),e[0]=t[5]*t[10]*t[15]-t[5]*t[14]*t[11]-t[6]*t[9]*t[15]+t[6]*t[13]*t[11]+t[7]*t[9]*t[14]-t[7]*t[13]*t[10],e[1]=-t[1]*t[10]*t[15]+t[1]*t[14]*t[11]+t[2]*t[9]*t[15]-t[2]*t[13]*t[11]-t[3]*t[9]*t[14]+t[3]*t[13]*t[10],e[2]=t[1]*t[6]*t[15]-t[1]*t[14]*t[7]-t[2]*t[5]*t[15]+t[2]*t[13]*t[7]+t[3]*t[5]*t[14]-t[3]*t[13]*t[6],e[3]=-t[1]*t[6]*t[11]+t[1]*t[10]*t[7]+t[2]*t[5]*t[11]-t[2]*t[9]*t[7]-t[3]*t[5]*t[10]+t[3]*t[9]*t[6],e[4]=-t[4]*t[10]*t[15]+t[4]*t[14]*t[11]+t[6]*t[8]*t[15]-t[6]*t[12]*t[11]-t[7]*t[8]*t[14]+t[7]*t[12]*t[10],e[5]=t[0]*t[10]*t[15]-t[0]*t[14]*t[11]-t[2]*t[8]*t[15]+t[2]*t[12]*t[11]+t[3]*t[8]*t[14]-t[3]*t[12]*t[10],e[6]=-t[0]*t[6]*t[15]+t[0]*t[14]*t[7]+t[2]*t[4]*t[15]-t[2]*t[12]*t[7]-t[3]*t[4]*t[14]+t[3]*t[12]*t[6],e[7]=t[0]*t[6]*t[11]-t[0]*t[10]*t[7]-t[2]*t[4]*t[11]+t[2]*t[8]*t[7]+t[3]*t[4]*t[10]-t[3]*t[8]*t[6],e[8]=t[4]*t[9]*t[15]-t[4]*t[13]*t[11]-t[5]*t[8]*t[15]+t[5]*t[12]*t[11]+t[7]*t[8]*t[13]-t[7]*t[12]*t[9],e[9]=-t[0]*t[9]*t[15]+t[0]*t[13]*t[11]+t[1]*t[8]*t[15]-t[1]*t[12]*t[11]-t[3]*t[8]*t[13]+t[3]*t[12]*t[9],e[10]=t[0]*t[5]*t[15]-t[0]*t[13]*t[7]-t[1]*t[4]*t[15]+t[1]*t[12]*t[7]+t[3]*t[4]*t[13]-t[3]*t[12]*t[5],e[11]=-t[0]*t[5]*t[11]+t[0]*t[9]*t[7]+t[1]*t[4]*t[11]-t[1]*t[8]*t[7]-t[3]*t[4]*t[9]+t[3]*t[8]*t[5],e[12]=-t[4]*t[9]*t[14]+t[4]*t[13]*t[10]+t[5]*t[8]*t[14]-t[5]*t[12]*t[10]-t[6]*t[8]*t[13]+t[6]*t[12]*t[9],e[13]=t[0]*t[9]*t[14]-t[0]*t[13]*t[10]-t[1]*t[8]*t[14]+t[1]*t[12]*t[10]+t[2]*t[8]*t[13]-t[2]*t[12]*t[9],e[14]=-t[0]*t[5]*t[14]+t[0]*t[13]*t[6]+t[1]*t[4]*t[14]-t[1]*t[12]*t[6]-t[2]*t[4]*t[13]+t[2]*t[12]*t[5],e[15]=t[0]*t[5]*t[10]-t[0]*t[9]*t[6]-t[1]*t[4]*t[10]+t[1]*t[8]*t[6]+t[2]*t[4]*t[9]-t[2]*t[8]*t[5];for(var n=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],r=0;16>r;r++)e[r]/=n;return e}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(6)],i=function(t){return function(e){return e.style[t]="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(29),n(6),n(7),n(30),n(31),n(32)],i=function(t,e,n,r,i,a){class o{constructor(t){this.stage=t.stage;this.radius=t.radius;this.gap=t.gap;this.tiers=0;this.N=0;this.prevTier=0;this.allPos=[];this.tierPos=[];this.savedPos=[]}static setOperation(e){t(e)}spheres(){this.diffuse();this.tiers=this.prevTier-1;delete this.N;delete this.prevTier;delete this.allPos;delete this.tierPos;delete this.savedPos}diffuse(){let t=this.stage.querySelectorAll(".tier-"+this.prevTier);if(!t.length){return false}this.N=this.prevTier?i(t,this.N):t.length;this.radius+=this.gap;this.tierPos=this.N==this.savedPos.length?this.savedPos:a(this.N,this.radius);let o=0,s=null,u=null,l=null,c=null,f=0,d=0;do{c=t[o].dataset;f=c["pid"];d=c["ctg_id"];if(this.prevTier){u=this.allPos[f];l=r(u,this.tierPos);s=this.tierPos[l];this.tierPos.splice(l,1)}else{s=this.tierPos[o]}t[o].style[e]="translate3d("+s.tx+"px, "+s.ty+"px, "+s.tz+"px)"+"rotateY("+s.ry+"rad)"+"rotateX("+s.rx+"rad)";t[o].style[e]=n(t[o],"transform");if(d){this.allPos[d]={x:s.tx,y:s.ty,z:s.tz}}o++}while(o<t.length);this.prevTier++;this.diffuse()}}window.YangSpaceLayout=o}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3),n(6)],i=function(t,e){return function(n){for(var r=[],i=0,a=0,o=0,s=0,u=0,l=0,c=0;a<n.length;){for(r=t.body.querySelectorAll(n[a].selector),s=n[a].radius,i=r.length,c=2*Math.PI/i,o=u=l=0;o<r.length;)u=s*Math.sin(c*o),l=s*Math.cos(c*o)*-1,r[o].style[e]="translate("+u+"px,"+l+"px)",o++;a++}}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r;r=function(){return function(t,e){var n=null,r=0,i=0,a=0,o=0,s=0,u=0;do a=e[u].tx-t.x,o=e[u].ty-t.y,s=e[u].tz-t.z,r=Math.sqrt(a*a+o*o+s*s),null!==n?(n>r&&(n=r,i=u),u++):(n=r,i=u);while(u<e.length);return i}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t,e){var n=[],r=[],i=-1,a=0;do if(t[a]instanceof Object){var o=t[a].dataset.pid;void 0===n[o]?(i++,n[o]=!0,r[i]=1):r[i]++,a++}while(a<t.length);var s=r.length,u=Math.max.apply(null,r);return Math.max(s*u,t.length,e)}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,n){var r;r=function(){return function(t,e){var n=Math.PI*(3-Math.sqrt(5)),r=2/t,i=0,a=1-r/2,o=0,s=[],u=0,l=0,c=0,f=0,d=0,p=0,h=0;do o=Math.sqrt(1-a*a),u=Math.cos(i)*o*e,l=Math.sin(i)*o*e,c=a*e,a-=r,i+=n,p=c/Math.abs(c),p=isNaN(p)?1:p,d=p>0?Math.atan(u/c)+Math.PI:Math.atan(u/c),f=Math.asin(l/e),s[h]={tx:u,ty:l,tz:c,ry:d,rx:f},h++;while(t>h);return s}}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}]);